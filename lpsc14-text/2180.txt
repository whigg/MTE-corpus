2180.PDF
LUNASERV 3 DEVELOPMENT AND USAGE OVER THE PAST YEAR. N. M. Estes, C. D. Hanger, A. A. Licht,  K.  S.  Bowley,  S.  Koeber,  E.  Bowman-Cisneros,  School  of  Earth  and  Space  Exploration,  Arizona State  University, Tempe, AZ 85287, nme@ser.asu.eduIntroduction:  The Lunar Reconnaissance Orbiter Camera  (LROC)  Science  Operations  Center  (SOC) created Lunaserv as an open source Web Map Service (WMS)  [1]  to  efficiently  render  LROC  images  and other  lunar  data  in  the  IAU2000  spatial  reference systems  (SRS)  [2].  Lunaserv  also  supports  other planetary  bodies  and  their  corresponding  SRS  sets. Support  for Mercury, Venus, Earth,  the Moon, Mars, Io, Ganymede, Europa, Callisto, Rhea, Tethys, Iapetus, Dione, and Enceladus is included [3],  and additional bodies  or  projections can  be  added at  run-time with simple YAML [4] configuration files.Recent  Developments:  In  the  upgrade  from Lunaserv  2  [1]  to  Lunaserv  3  the  front-end  was completely  rewritten  leading  to  several  key improvements. The primary motivation for the rewrite was  to  simplify  installation  and  maintenance. Previously,  the  front-end  used  the  Ruby  on  Rails framework [5]; with Lunaserv 3, the smaller and faster Rack [6] framework is used directly, and the Ruby on Rails framework is no longer required for installation. This switch simplifies dependencies and also removes the  necessity  of  installing  a  database.  Additionally, Lunaserv 3 is fully WMS compatible. While Lunaserv 3 is not a certified WMS implementation by the Open Geospatial Consortium (OGC), Lunaserv 3 does pass all of the CITE tests published by the OGC for WMS 1.1  [7].  Finally,  Lunaserv  3  introduces  configurable database  and  authentication  support.  The  database configuration supports PostgreSQL at install, but new database modules are also configurable in Lunaserv 3. Authentication can be done against  multiple sources. Both  simple  username/password  and  LDAP authentication  are  available  at  install,  and  other authentication modules can be added.In addition to these front-end changes, Lunaserv 3 includes improvements to the rendering engine as well. The illumination layer underwent the most substantial change,  as  it  now  supports  the  Lommel-Seeliger photometric  function  as  an  alternative  to  the  basic Lambertian model (Figs. 1, 2) [8]. This change laid the groundwork  to  easily  support  additional  photometric functions to the illumination layer in future releases. In the rendering engine, the stamp and raster layers were merged  and  the  new  raster  layer  supports  GeoTIFF headers in pyramidal TIFF source data. The shapefile layer  in  Lunaserv  3  introduces  the  ability  to  draw labels in addition to shapes, and the shapefile layer is also now queryable.The LROC SOC also contributed a modification to the QGIS project that allows IAU2000 projections to be  requested  via  WMS  [10].  Once  released,  this Figure 2: Synthetic illumination applied to the WAC reflectance map from a Lommel-Seeliger photometric function resulting in more realistic lighting using the same time and viewing angle as Figure 1 [9].Figure 1: Synthetic illumination of a global LROC Wide Angle Camera (WAC) reflectance map using a Lambertian photometric function to simulate real lighting on 17 December 2013 [9].2180.pdf
45th Lunar and Planetary Science Conference (2014)
modification will allow the use of planetary data in a native  SRS in QGIS using Lunaserv  or  other  WMS servers that add support for the IAU2000 projections (Fig. 3).LROC SOC Usage: The LROC SOC operations staff  employs  Lunaserv  for  LROC  observation planning  with  a  modified  version  of  JMARS  [11] known  as  JMoon. JMoon  allows  for  custom  WMS parameters to be passed through to Lunaserv for any layer that supports optional parameters. This upgrade allows custom coloring, customized illumination maps, and other options not previously available in JMARS. The LROC SOC operations staff also uses Lunaserv in other  tasks such  as  generating  synthetic  illumination views for oblique target  planning. LROC researchers use Lunaserv for feature digitization efforts, coverage analysis,  context  maps,  and  permanently  shadowed region studies. LROC SOC staff  also runs  Lunaserv via  scripts  to  generate  series  of  images  that  are combined to generate movies for presentations, or to visualize  time  series  data.  For  digitizing  efforts  in particular,  where  tasks  can  consume  many  days  of work, WMS enables researchers to continue this work from any location without first having to transmit large datasets to laptops or remote workstations.Usage  by  Other  Groups: From  the  Lunaserv release in March 2013 through December 2013, over 74,000  hits  to  the  Lunaserv  website  and  ~850 downloads of the Lunaserv software occurred. In the same time period,  the  public  Lunaserv  WMS server rendered over 2.1 million map requests (Fig. 4). Primarily, the public Lunaserv server supports the LROC PDS interface allowing browsing and retrieval of LROC data by the public or outside research groups; however, based on traffic logs, the LROC SOC noted that other projects utilize the public Lunaserv server. For  example,  the  2013  Space  Apps  Challenge contributed  ~10%  of  the  traffic  that  the  public Lunaserv  server  saw  in  April  2013.  The  Regional Planetary Information Facility (RPIF) at Arizona State University  (ASU)  uses  map  data  from  a  variety  of sources,  including  the  public  Lunaserv  server,  and combines the map data in ArcGIS for various mapping and measurement projects [12].Future Work: As the LROC SOC continues to use Lunaserv for operations, research, and public outreach, Lunaserv  will  be  updated  with  new  features  and capabilities  as  needed.  Changes  identified  for  future work include merging the raster and numeric layers to simplify  and  expand  support  for  varying  bit  depths, Web  Feature  Service  (WFS)  support,  and  WMS 1.3 support.References: [1] Estes, N.M.; et. al.; Lunaserv Web Map  Service:  History,  Implementation  Details, Development,  and  Uses,  http://adsabs.harvard.edu/  abs/2013LPICo1719.2609E. [2] Hare, T. et. al., (2006), LPSC  XXXVII,  abs.  1931.  [3]  http://  lunaserv.lroc.asu.edu/. [4] YAML http://www.yaml.org/ [5]  Ruby on Rails http://rubyonrails.org/  [6]  Rack,  a modular Ruby webserver interface https://github.com/rack/rack  [7]  OGC  WMS  Standards,  http://  www.opengeospatial.org/  standards/wms  .  [8]  Hanger, C. D.; et. al.; DEM-based Illumination Simulation in a Web  Map  Service  using  Lunaserv;http://lunarscience.nasa.gov/wp-content/uploads/LSF13P/Hanger_nlsf2013.pdf
.  [9]  Boyd,  A.K.,  et.  al.,  LROC WAC  100  Meter  Scale  Photometrically  Normalized Map of the Moon, P13B-1744. presented at 2013 Fall Meeting, AGU, San Francisco,  Calif.,  9-13 Dec [10] QGIS  IAU2000  SRS  Change,  https://github.com/  qgis/QGIS/pull/982.  [11]  Christensen,  P.R.,  et.  al., JMARS â€“ A Planetary GIS,  http://adsabs.harvard.edu  /  abs/2009AGUFMIN22A..06C.  [12] Nelson, D. (2013 December 20); Email Interview.Figure 3: QGIS showing the available projections from Lunaserv WMS for the WAC Global Basemap.Figure 4: Public Lunaserv Web Stats2180.pdf
45th Lunar and Planetary Science Conference (2014)
