2034.PDF
LARGE-SCALE CO-REGISTRATION OF MARS HIGH-RESOLUTION NASA IMAGES TO HRSC: A CASE-STUDY OF THE MC11-E QUADRANGLE  P.Sidiropoulos1 and J.-P. Muller1, 1Imaging Group, Mullard Space Science Laboratory, University College London, UK, p.sidiropoulos@ucl.ac.uk, j.muller@ucl.ac.uk  Introduction:  Starting from Viking Orbiter in the 1970s, Mars has been extensively mapped with highresolution images over the last 4 decades. The calculated number of Mars surface (visible spectrum) images with resolution finer than 100m/pixel is more than 400,000, imaging an area that is equal to 6.59 times the overall surface area of Mars [1]. This dataset has been acquired by 6 cameras that were on board 5 NASA and 1 ESA missions (Table 1). Half of the 6 cameras (namely CTX, HRSC and THEMIS) focus on achieving the greatest possible extended coverage of Mars. Each of them has mapped more than 80% of Mars with resolution finer than 100 m/pixel [1]. The remaining cameras (VIS, MOC-NA and HiRISE) focus on imaging interesting feauteres on Mars with the highest possible resolution at the time that the mission was designed.  Instrument Mission Resolution # Images VIS VO 1 & 2 8-100 m/pix ~23K MOC-NA MGS 1.5-12 m/pix ~96K THEMIS Mars Odyssey 17.5-75 m/pix ~202K HRSC MEX 12.5-100 m/pix ~3.7K CTX MRO 5-6 m//pix ~70K HiRISE MRO 0.25-0.5 m/pix ~40K Table 1. Orbital cameras that have acquired highresolution images of the Martian surface. A 100 m/pixel resolution cut-off has been used for the cameras that have acquired both high and medium resolution images. Despite the substantial volume of the acquired high-resolution imagery, its use is restricted by the fact that due to pointing errors and limitations in the accuracy of the SPICE kernels, each acquired image is poorly areo-referenced. Their areo-referencing is further undermined by the lack of a commonly accepted Mars  datum to be used as a reference. HRSC is designed to acquire along-track stereo images, thus allowing the derivation of extensive 3D models of Mars, which can be used as a reference. In this abstract we present recent work which exploits HRSC, within EU-FP7 project (http://www.i-Mars.eu).  MC11-E processing: Our ultimate goal is to coregister all Mars high-resolution images, so as to be projected into a common global co-ordinate system. A first step is to co-register all overlapping images for the first HRSC mosaic generated for the MC11-E quadrangle, which constitute a significant part of the total imagery, and can be used to pinpoint the difficulties that need to be overcome for the successful processing of the global dataset. The MC11-E quadrangle (i.e. the east half of Oxia Palus quadrangle) extends from 0o to 30o North and from 337.5o to 360o East, including several of the most geologically interesting regions of Mars, such as Chryse Planitia, Xanthe Terra, Mawrth Vallis, Meridiani Planum, Trouvelot Crater, etc. In 2015, the HRSC team produced a mosaic for MC11-E by stereoprocessing and bundle block adjusting panchromatic HRSC images from 89 orbits [2]. The panchromatic mosaic has a resolution of 12.5 m/pixel, while the corresponding DTM 50m/pixel. MC11-E include 7,920 high-resolution images acquired from all 5 NASA cameras (Table 2). This imagery set constitutes the approximately 2% of all highresolution, a percentage that is increased to 4% if we take into account only the part of Mars for which HRSC 3D-model have been processed to date, either as a mosaic or a single strip DTM-ORI.  Instrument Images in MC11-E Resolution VIS 504 8-100 m/pix MOC-NA 1,558 1.5-12 m/pix THEMIS 3,629 17.5-75 m/pix CTX 1,365 5-6 m//pix HiRISE 864 0.25-0.5 m/pix Table 2. High-resolution images included in MC11-E. The reported number is estimated by imposing a 10% threshold on the area of the image which should be included within MC11-E quadrangle. Co-registration pipeline overview: In order to be able to handle such a large-scale procesing task as the batch co-registration of this large number of highresolution images, the co-registration pipeline that we have developed was designed to be fully automatic. This specification implied that several solutions should be developed from scratch, which would allow the systematic processing of multi-instrument Mars orbital datasets, i.e. multifarious datasets with substantial differences in the point spread functions, the solar illumination conditions, image acquisition geometry, the camera setup, the atmospheric conditions during image acquisition, etc. The processing chain starts with interest point extraction and feature detection from both the input image and the HRSC nadir image, using the SIFT algorithm [3]. Subsequently, the SIFT points are matched, following a variation of the coupled decomposition 2034.pdf
47th Lunar and Planetary Science Conference (2016)
algorithm [4] that is tailored for Mars images. The main modification of the matching in relation to the traditional SIFT point matching is that in our matching the prior information of the point locations in the input image (as estimated by the SPICE kernels) is taken into account to limit the SIFT points in the HRSC nadir image that can be matched with them. Coupled decomposition both decrease the number of erroneous matches (i.e. the errors of commission) whilst increasing the number of correct matches (i.e. reduce the errors of omission). Subsequently, a novel scheme based on RANSAC algorithm [5] but also taking into account the non-linearities of orbital cameras is used to select the correct matches from a stack of outliers, which after coupled decomposition may be as high as 99% of the estimated matches.  The final matches are used to estimate a rigid camera model (depending on the input image, either a linear pushbroom camera model [6] or a frame model [7]) which gives a first approximation of the image position to the 3D coordinate system that is defined by the HRSC nadir image and DTM. This position is refined through polynomial models, which focus on suppressing the global residuals, thus giving the final coregistration result, which is saved in a geotiff format. Co-registratrion results and lessons learned: The co-registration processing is ongoing. At the time of abstract submission, the processing of CTX and MOCNA was completed successfully while 70% of THEMIS-VIS was finished, and HiRISE and VIS hasn't started yet. We plan to have finished the processing of all images by the time of the conference, and present results about all 5 types of products. For the time being, we report statistics for CTX and MOCNA, for which the processing has finished (Table 3). There are three types of statistics given: (1) the failure rate, i.e. the percentage of images for which the automatic processing has failed to produce any results, (2) the median average accuracy in X and Y dimensions, i.e. the expected average mis-registration error for an image and (3) the average time that was required for their processing, using single-core threads on blade linux machines (16-core 1.6GHz CPU & 48Gb RAM). Table 3 shows that the processing pipeline is able to automatically batch-process large amounts of  highresolution images, with an accuracy that is close to the one that could be achieved by manual co-registration of each individual image. For example, by extrapolating the MOC-NA processing time it can be deduced that the whole MOC-NA dataset could be co-registered by just one 16-core machine in 4 months. Furthermore, even though this is a rather premature conclusion, the significant difference in the failure rate between CTX and MOC-NA seems to be caused by the difference in their quality, and not by a fault in the processing chain. Camera ErrX (m) ErrY (m) Time (min) Failure Rate CTX 6.48 6.08 331 7.18% MOC-NA 5.33 4.85 29.3 20.71% Table 3. Automatic co-registration statistics for CTX and MOC-NA camera. The reported statistics is the median aveage mis-registration error in both directions (counted in metres), the average time per image and the dataset failure rate. Finally, in Figure 1 we show an example  of a mosaic that is formed from 4 automatically coregistered CTX images. This is a 37X26 km area from Mawrth Vallis (25N, 341E). Note that the overall dataset will be released within EU project iMars [8].   Figure 1. Part of a mosaic of 4 automatically coregistered CTX images: T01_008847_2056, P22_009682_2048, B09_13229_2047 and B09_13295_2047 Acknowledgements: The research leading to these results has received partial funding from the STFC "MSSL Consolidated Grant" ST/K000977/1 and partial support from the European Union's Seventh Framework Programme (FP7/2007-2013) under iMars grant agreement nËš 607379.  References: [1] Sidiropoulos P. and Muller J.-P. (2015) Planetary and Space Science, 117, 207-222. [2] Gwinner K. et al. (2015), EGU General Assembly. [3] Lowe D. (2004) International Journal of Computer Vision, 60(2),  91-110. [4] Sidiropoulos P. and Muller J.-P. (2015) IEEE Transactions on Image Processing, 24(7), 2124-2139. [5] Fischler M. A. and Bolles R. C. (1981) Communications of the ACM, 24(6), 381-395. [6] Gupta R. and Hartley R. I. (1997), IEEE Transactions on Pattern Analysis and Machine Intelligence, 19(9), 963-975. [7] Hartley R. and Zisserman A. (2003), Cambridge University Press, ISBN 0-52154051-8. [8] Muller J.-P. et al. (2016) LPSC XLVII. 2034.pdf
47th Lunar and Planetary Science Conference (2016)
