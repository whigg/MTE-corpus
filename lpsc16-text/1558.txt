1558.PDF
FEATURE-LINKED ANNOTATION OF LUNAR NOMENCLATURE.  M. A. Hunter, C. M. Fortezzo, R. K. Hayward, T . M. Hare. U. S. Geological Survey (USGS) Astrogeology Science Center , 2255 N. Gemini Dr., Flagstaff, AZ 86001 (mahunter@usgs.gov, cfortezzo@usgs.gov, rhayward@usgs.gov, thare@usgs.gov).   Introduction:  Increased mapping of lunar and martian landforms have created a need to utilize dynamic methods of keeping pace with International Astronomical Union (IAU) Working Group for Planetary System Nomenclature (WGPSN)-approved feature nomenclature [1].  Geographic information systems (GIS) have proven ideal for this purpose as they now support nearly the full spectrum from data visualization to spatial analysis and now to publication.  This need has hastened the transition away from graphical applications like Adobe Illustrator (AI) towards GIS environments like Esri’s  ArcGIS to manage annotation for products not only for publication through USGS Publication Services Center (PSC) but also for the benefit of the planetary community.   AI remains the standard tool for creating publication-ready map products and figures, but advancements in Esri’s proprietary Maplex labeling engine have allowed users to more easily manage label placement.  While much of the annotation placement can be automated, longer names and highly studied regions around landing sites still require manual updates.  Once difficult cases are resolved, a considerable amount of work creating new maps at various scales and map projections can now be easily generated and quickly modified because the annotation values are now “feature-linked” within a geodatabase (a GIS database).  Feature-linked annotation allows for custom placement of nomenclature based on feature attributes, created or deleted as the geodatabase is updated, and has the added benefit of being stored as a vector feature class with its own spatial reference and scale [2]. Background:  In order to bridge online feature nomenclature offerings and stand-alone map products concurrently, USGS Astrogeology Science Center (ASC) has taken an established practice of managing annotation at large scales in a GIS and applied it to global (1:10,000,000), regional (1:2,000,000) and quadrangle (1:1,000,000) scale maps of the Moon, and global (1:20,000,000) and quadrangle (1:5,000,000) scales of Mars [3].  Combined with ArcMap’s Data Driven Pages toolset this can be used to ensure the planetary science community has access to continually updated feature annotation for proposals, research and reporting.  Data Driven Pages automates the creation of map books with unique extents, projections, scales and data-enabled map text.  Also, the primary method for storing nomenclature in a geodatabase was as a point feature.  While this supported annotation for large features, such as impact craters and maria, this method did not properly represent linear features and densely named areas. Methodology:  While annotation placement rules can  be refined to produce results very similar to those done manually in AI, the Maplex label engine results are never as precise and the same parameters rarely produce identical results.  Even without conflicting features in the area, placement of annotation can violate its own rules so users must verify all placement.  This methodology can automate approximately 80% of annotation placement, but more importantly, facilitate the final editing and continued maintenance of nomenclature annotation. Geodatabase management:  The type and size of the annotation features drive the placement properties in the Maplex engine, so the first task was to create a geodatabase that could support each instance in which features could be differentiated.  Landforms with direction, such as vallis and rupes features, required a basic bounding geometry to drive the angle of placement, and circular/point feature geometries were created through buffering points by their documented radius [Figure 1].  Sizes of directional features were measured by the widest part of their minimum bounding envelopes.  To facilitate data driven pages, polygon features were intersected with quadrangle boundaries so features are at the appropriate boundary [Figure 2].  Figure 1.  Feature linked annotation placement shown below as driven by object geometry (Moon 1:1,000,000-scale).   1558.pdf
47th Lunar and Planetary Science Conference (2016)
Maplex label engine:  Given a properly defined file geodatabase, the annotation feature class was created (feature-linked annotation also creates a relationship class automatically) and refined by separately documenting placement properties using Structured Query Language (SQL) statements.  An iterative process, documentation was updated to capture as much subtlety as possible compared to existing quadrangle maps [4].  Within the annotation feature class, annotation subclasses were created for each feature type and size, each with its own font type, size, placement properties and rules for resolving conflicts.  Simple Python or Visual Basic Script code was used to further customize placement. As examples, we used code to capitalize features over 85 kilometers, and stack large feature nomenclature and insert line breaks.  Figure 2.  Nomenclature polygons intersected with quadrangle boundaries to generate annotation for each separate quadrangle (Moon 1:2,000,000-scale).   Map projects and editing:  Limitations of the Maplex engine require that some areas be edited in a manner similar to original AI nomenclature, but the annotation editing toolset facilitates enough customization that it can be completed entirely within the GIS. One of the primary benefits of storing annotation as a vector layer is that existing annotation can be moved to suit an area of interest, and its properties (font type and size, color, angle, spacing, visibility, etc.) are managed in an attribute table which makes customization simple.  Maintaining the Default annotation subclass allows users to create labels for any font style not captured by SQL queries or exceptions to placement rules.   For this work, the 1:1,000,000 quadrangle-scale map project was combined with the Data Driven Pages toolset to create a map book with each page extent clipped to the quadrangle feature.  Adding a projection string field to the quadrangle feature class allowed for unique projections of each page as needed.  However, the 600 character text field means the layer can only be stored as a file geodatabase, not the more universal shapefile format.   Future Work:  Once the geodatabase and map projects are ready for community use they will be posted on the Planetary Geologic Mapping website (http://planetarymapping.wr.usgs.gov) packaged with supporting documentation.  In addition to metadata, supporting documentation will include this abstract and documentation with all SQL queries and placement properties used to create the projects.  Users not able to use GIS geodatabases will still be offered Adobe PDF versions for use in graphical applications like AI. Changes to IAU-approved nomenclature will have to be added in separately because each scale of annotation is kept in its own geodatabase along with the feature and relationship classes driving them. Recommendations for continuation of this work are to eliminate redundant workflows by supporting all scales and projections in a single geodatabase as well as use the geodatabase to annotate features within web mapping interfaces. References:  [1] IAU WGPSN. (2015). Gazetteer of Planetary Nomenclature, http://planetarynames.wr. usgs.gov/. [2] ESRI. (2015). ArcGIS Help 10.1, About editing feature-linked annotation. http://resources. arcgis.com/EN/HELP/MAIN/10.1/index.html#/About_editing_feature_linked_annotation/01m70000004w 000000/. [3] Fortezzo, C. M. (2010). Annotation & Nomenclature. http://astropedia.astrogeology. usgs.gov/download/Software/GISTutorials_ArcMap_Annotation_Nomenclature.pdf. [4] IAU WGPSN (2015). 1:1 Million- Scale Maps of the Moon. http://planetarynames.wr.usgs.gov/Page/Moon1to1MAtlas. 1558.pdf
47th Lunar and Planetary Science Conference (2016)
