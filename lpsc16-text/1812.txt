1812.PDF
Where have all the pixels gone?  K. Willner1, M. Wählisch1, K.-D. Matz1, K. Gwinner1, J. Oberst1,2, 1German Aerospace Center (DLR), Rutherfordstr. 2, 12489 Berlin, Germany (konrad.willner@dlr.de) ; 2Technische Universität Berlin, Straße des 17. Juni 135, 10623 Berlin, Germany.   Introduction:  When converting geo-referenced planetary image data products from widely used data archives or software into other file formats we discovered that the geo-reference is translated incorrectly. This issue has been investigated further to identify the source of mismatch of the map-references and to improve the consistency of conversions between different common data formats.  Background: Current projects such as PRoViDE, iMars and Cross Drive, funded by the European Union, deal with the exploitation of exploration data of European and international scientific space missions. Here, a focus is given to the exploitation of data from Mars obtained by both orbital and landed missions. PRoViDE processed a major portion of image data obtained by landed probes on Mars and other planetary bodies, including the first landers, Viking and Pathfinder, and the latest rover mission, the Mars Science Laboratory (MSL). Cross Drive is developing a virtual collaborative workspace for efficient data exploitation. This project is using primarily data obtained by orbiting spacecraft since a major focus is set to atmospheric science and landing site selection. However, since the developed collaborative workspace will be applicable for rover operation tasks as well, rover-based image data and derived products will also be included. The iMars project is developing a user platform for Mars surface science, consisting of a collection of coregistered data products from Mars orbital imaging experiments, and specific tools for producing, exploring and analyzing these – e.g. a web-GIS system and a citizen science project. Though all of these projects focus on different aspects of data exploitation, a common problem is the coregistration of data obtained by different instruments on various missionsand at different epochs. This suggests the definition of a common data format as project partner work with a variety of software suits that require an equally large number of data formats. A prevalent point of discussion is the definition of a common map reference, and here, the lateral reference body and the height reference require multiple transformations and often image data need to be resampled before data sets become compatible and thus comparable. The initiating spark: In the scope of the iMars project the group at DLR has the task to validate processing products of other project partners against existing reference data sets like the Mars Orbiter Laser Altimeter (MOLA) digital terrain model (DTM). The data is delivered in GeoTiff format while the MOLA reference data is available in PDS, ISIS cube or the MIPL VICAR format. As a confidence test, the ISIS cube MOLA DTM was converted into the VICAR format and vice versa. Comparing the DTMs, a lateral shift between the two data sets is observed. After studying the documentation of the ISIS cube reference DTM it became clear this DTM was padded by one extra line and sample on each side. This one-pixel shift in line and sample direction  was applied. Nonetheless, an additional offset remained. Manually shifting the data sets by another pixel in line and sample direction with respect to each other resolved this issue. Investigations: Investigating this issue further, it becomes clear that several differences among the data formats and their respective definition of the map reference exist. These are: a) PDS and VICAR define the map reference in the image coordinate system with the y values increasing in line direction (down) and the x values increasing along the column direction (right). b) ISIS cube and GeoTiff define the position of the top left pixel in map coordinates of the respective map projection – where the map coordinate system originates in the map projection center and the y axis is pointed up (North) while the x axis is point to the right (East). c) Though the image coordinate x=1, y=1 is assigned to the center of the top left pixel among all mentioned file formats – PDS, Vicar [1], ISIS cube, and GeoTiff [2] –, the point of reference in the PDS/VICAR format is the center of the top left pixel (image coordinates 1,1) [1] while the point of reference for GeoTiff and ISIS Cube files is the actual edge of the image at the top left corner pixel (image coordinates 0.5, 0.5) [3] (cf. Figure 1). These definitions make a number of transformations necessary that need to be performed in the correct order. Otherwise a transformation results in a faulty translation of the map reference parameters between different file formats. This was in fact the case when importing a standard PDS map projected MOLA reference DTM into the USGS Isis software leading to the remaining one line and one sample offset between the data sets as mentioned before. An independent software strictly following the documented definitions was implemented which revealed the error in the mathematical realization of the reference transformations.The erroneous translation was communicated to the USGS and to the Geospatial Data Abstraction 1812.pdf
47th Lunar and Planetary Science Conference (2016)
Library (GDAL) [4], a commonly used translator library for geospatial raster and vector formats, that applied the same transformation parameters. GDAL already corrected their software implementation. Other Observations: When investigating this issue, it was noticed that the USGS Isis software maintains a table with transformation values to translate the map reference from PDS to the Isis Cube format. This table holds several sets of parameters that will be applied for specific data sets such as the Viking Orbiter mission data or, the more recent, Kaguya data. This raises the question if current deliveries of map-projected data to PDS have correct descriptions of their map references?  Furthermore, it was noted that the definition of the point of reference in the PDS format is not clearly documented. There is only one occurrence of an explicit example in [1] that clearly defines the center of the top left pixel is the point of reference for map projections. It could well be that the reference mismatches are a result of this ambiguous definition. Inconsistencies between archived data sets have been observed in the past. Recommondations: With the transition to PDS4 responsible groups should be aware of the fact that a clear definition is needed to pave the way for a common understanding of map references in image data. First drafts of XML schemata already describe the circumstances well, however, drawings and examples are seen of great value to make definitions very clear. All data providers who plan to convert already archived map-projected data from PDS3 to PDS4 should be aware of these issues and should test, prior to a batch conversion, if the PDS3 data set has a correct reference which is in line with existing definitions. Clear recommondations to combine data of different PDS releases or from different sources and formats is more difficult. A common reference is not always given per se. As there is no ground truth for any of the planetary data sets it is a question of definition which of the applied data sets will be used as a reference – at least within the project being worked on. However, for Mars, given the existing global MOLA reference dataset and a growing coverage by HRSC image and DTM data products at intermediate resolution and accurately co-registered to it [5], the recommendation is to adopt this system whenever possible. References:  [1] Planetary Data System Standards Reference, Jet Propulsion Laboratory, California Institute of Technology, Pasadena, California, 2009, Version 3.8, Available from: https://pds.jpl.nasa.gov/documents/sr/StdRef_20090227_v3.8.pdf. [2] U.S. Geological Survey, USGS Isis: Glossary. Web page (2015), Last Accessed: 06. Jan. 2016; Available from: https://isis.astrogeology.usgs.gov/documents/Glossary/Glossary.html#ProjectionX. [3] U.S. Geological Survey, USGS Isis: Label Dictionary. Web page (2004), Last Accessed: 06. Jan. 2016; Available from: https://isis.astrogeology.usgs.gov/documents/LabelDictionary/LabelDictionary.html. [4] OSGeo, GDAL - Geospatial Data Abstraction Library. (2015), Last Accessed: 06. Jan. 2016; Available from: http://www.gdal.org. [5] Gwinner et al. (2016), PSS, in revision                                    Figure 1: Map references in the different image file formats used among planetary scientists.  Acknowlegdments: The research leading to these results has received funding from the European Union’s Seventh Framework Programme (FP7/2007-2013) under grant agreement n° 607379 iMars. This research has made use of the USGS Integrated Software for Imagers and Spectrometers (ISIS). 0.5 0.5 PDS / VICAR Sample Line Center  of Projection 0.5 0.5  GeoTiff / Isis Cube X Y Center  of Projection 1812.pdf
47th Lunar and Planetary Science Conference (2016)
