1241.PDF
AN INTEGRATED WORKFLOW FOR PRODUCING DIGITAL TERRAIN MODELS OF MARS FROMCTX AND HIRISE STEREO DATA USING THE NASA AMES STEREO PIPELINE.  David P. Mayer1,Edwin S. Kite1, 1University of Chicagoâ€”Department of Geophysical Sciences (dpmayer@uchicago.edu).Introduction:  Stereo images represent a keydataset for producing digital terrain models (DTMs) ofplanetary surfaces.  Nearly all of the high-resolution(<10 meters/pixel) stereo image data of Mars comesfrom the CTX and HiRISE sensors.  However, CTXDTMs are not available through the PDS and fewerthan 300 of the ~4400 HiRISE targeted stereopairshave been transformed to DTMs and released to thePDS as of December 2015. This often requires researchers who wish to incorporate CTX and HiRISEelevation data in their work to produce their ownDTMs.  The NASA Ames Stereo Pipeline (ASP) is a freesoftware package that can be used to create DTMsfrom stereo image data collected by a variety of sensors including CTX and HiRISE [1,2]. Here, we outline a procedure for producing CTXand HiRISE DTMs using ASP. The workflow is highlyautomated through the use of several Bash scripts thatact as wrappers around the ASP routines and is configured for parallel processing in either a distributed com puting environment or on a single machine. A humanin-the-loop is required at key steps in order to assessthe overall quality of the stereo triangulation resultsand to estimate parameters necessary for aligning apreliminary DTM to reference elevation data. Theworkflow uses only free, open-source software, whichminimizes the costs associated with producing DTMs.Image Selection:  We identify HiRISE stereo datafor a given region of interest using the HiRISE team'sdatabase of deliberately targeted stereopairs(http://www.uahirise.org/stereo_pairs.php). We then select CTX stereopairs by first searching the PDS for images that were acquired simultaneously with theHiRISE images.  If a corresponding CTX image pair isnot available, we instead use the criteria outlined in [3]to identify alternative CTX image pairs that overlapwith a given HiRISE stereopair.CTX Processing:   Preprocessing.  The CTX Experimental DataRecords (EDRs) are prepared for ASP using the USGSIntegrated Software for Imagers and Spectrometers(ISIS).  The image data are converted from PDS toISIS cube format with mroctx2isis. SPICE kernels areadded to each image using spiceinit and the pointingdata are smoothed using spicefit. A photometric calibration is applied using ctxcal followed by a correctionfor even/odd detector striping using ctxevenodd. Bundle Adjustment.  Each preprocessed stereopairis then bundle adjusted using ASP's bundle_adjust tool.We have found that including this step minimizes"washboarding" in the final DTMs. Preliminary Point Cloud/DTM Generation.  ASP'sparallel_stereo routine is used to generate an initial 3dimensional point cloud for each stereopair. The use ofthe parallelized implementation of stereo allows muchof the stereo extraction process to be distributed amongmany CPUs on potentially many computers, therebyincreasing computational efficiency and reducing thetime required to create a single point cloud. ASP'spoint2dem routine is then used to transform the pointcloud into a DTM.  Point Cloud Alignment to MOLA.  The preliminaryCTX point cloud is aligned to MOLA datum elevationsusing ASP's pc_align routine. pc_align uses an iterative closest points algorithm to identify a 3-dimensional affine transform that optimizes the alignmentbetween the ASP-derived point cloud and a referenceelevation data set (i.e. MOLA). The routine requires anestimate of the largest expected displacement betweenthe source and reference elevation data. We import individual MOLA shot data that overlaps the CTX DTM into a GIS-compatible format andcalculate the difference between the MOLA elevationsand the nearest CTX DTM pixel.  An analyst then inspects a histogram of the elevation differences and estimates the maximum displacement parameter forpc_align. We have found that an appropriate value typically corresponds to somewhere between the 95th and99th-percentile of the differences between the MOLAand CTX elevations, after removing shots from MOLAorbits that are obvious outliers (elevation differences>>~4 standard deviations).Final DTM and Orthoimage Generation. We produce a final CTX DTM and orthorectified version ofthe nadir-most image in the stereopair by passing thepoint cloud output by pc_align and the nadir-most image as input to point2dem. HiRISE Processing:  Preprocessing.  HiRISE EDRs are prepared forstereo processing using two Python scripts that are partof ASP. The Python scripts are wrappers for severalISIS routines. hiedr2mosaic.py ingests the EDRs intoISIS, apply SPICE kernels, smooth the SPICE data,perform photometric calibrations and mosaics the individual CCDs from each image. cam2map4stereo.py isthen used to transform the images from each stereopairto a common map projection and spatial resolution.  Preliminary Point Cloud/DTM Generation.  Themap-projected images are passed as input to1241.pdf
47th Lunar and Planetary Science Conference (2016)
parallel_stereo and the resulting point cloud is passedto point2dem in order to create a preliminary DTM.Point Cloud Alignment to CTX.  The preliminaryHiRISE point cloud is aligned to a corresponding CTXDTM using pc_align.  In order to estimate the maximum displacement parameter, an analyst first subtractsthe preliminary HiRISE DTM from the reference CTXDTM and then inspects the histogram of the resultingdifference raster. An appropriate value for the maximum displacement typically corresponds to approximately the 99th-percentile of the differences betweenthe reference CTX DTM and the preliminary HiRISEDTM.Final DTM Generation.  We produce a finalHiRISE DTM and orthorectified version of the nadirmost image of the stereopair using point2dem following a similar approach to that used with the CTX data.DTM Availability: Our lab has produced CTX andHiRISE DTMs of sedimentary rocks in central VallesMarineris, Gunjur crater, Gale crater, and a small number of sites reported in the literature to contain chlorides. A list of DTMs that have been produced so farcan be obtained from the lead author.  IndividualDTMs will be made available on request. Code Availability:  We plan to release the Bashscripts used in our CTX and HiRISE processing workflow and corresponding documentation through theUniversity of Chicago's Git repository (https://psdrepo.uchicago.edu/groups/kite-lab) in spring 2016. Prerelease versions of the scripts are available from thelead author upon request.References: [1] Moratto, Z. M., et al. (2010). AmesStereo Pipeline, LPSC XLI, Abstract #2364. [2] Broxton, M. J. and Edwards, L. J. (2008), LPSC XXXIX,Abstract #2419. [3] Becker, K.J. et al (2015), LPSCXLVI, Abstract # 2703.Acknowledgments: The authors wish to thank O.Alexandrov, F. Calef and C. Fassett for helpful discussions about stereo image processing. This work wascompleted in part with resources provided by the University of Chicago Research Computing Center.1241.pdf
47th Lunar and Planetary Science Conference (2016)
